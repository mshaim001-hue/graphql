# üìä –ê–Ω–∞–ª–∏–∑ —Ç–∞–±–ª–∏—Ü—ã `public.audit`

## üîç –û–±–∑–æ—Ä
–¢–∞–±–ª–∏—Ü–∞ `public.audit` —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞—É–¥–∏—Ç–∞—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ Tomorrow School. –≠—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏ –æ—Ü–µ–Ω–æ–∫ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏—Ö —Ä–∞–±–æ—Ç.

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è:
- **`id`** (PK) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∞—É–¥–∏—Ç–∞
- **`groupId`** (FK) - –°—Å—ã–ª–∫–∞ –Ω–∞ –≥—Ä—É–ø–ø—É (–º–æ–¥—É–ª—å/–∫—É—Ä—Å)
- **`auditorId`** (FK) - –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è-–∞—É–¥–∏—Ç–æ—Ä–∞
- **`resultId`** (FK) - –°—Å—ã–ª–∫–∞ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–µ–∫—Ç–∞
- **`attrs`** (JSONB) - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã (–æ–±—ã—á–Ω–æ –ø—É—Å—Ç—ã–µ)
- **`grade`** - –û—Ü–µ–Ω–∫–∞ –∑–∞ –∞—É–¥–∏—Ç (1.0, 1.2, null)
- **`createdAt`** - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞—É–¥–∏—Ç–∞
- **`updatedAt`** - –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **`version`** - –í–µ—Ä—Å–∏—è –∫–æ–¥–∞/–ø—Ä–æ–µ–∫—Ç–∞ (Git hash)
- **`endAt`** - –î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞—É–¥–∏—Ç–∞

## üîó –°–≤—è–∑–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏

### –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
1. **`public.user`** (—á–µ—Ä–µ–∑ `auditorId`) - –ê—É–¥–∏—Ç–æ—Ä
2. **`public.result`** (—á–µ—Ä–µ–∑ `resultId`) - –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–µ–∫—Ç–∞
3. **`public.group`** (—á–µ—Ä–µ–∑ `groupId`) - –ì—Ä—É–ø–ø–∞/–º–æ–¥—É–ª—å
4. **`public.object`** (—á–µ—Ä–µ–∑ `result.objectId`) - –ü—Ä–æ–µ–∫—Ç

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–∞–Ω–Ω—ã–º

### –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∞—É–¥–∏—Ç—ã:
- **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ**: 20+ –∞—É–¥–∏—Ç–æ–≤
- **–ê—É–¥–∏—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (ID: 2058)**: 10 –∞—É–¥–∏—Ç–æ–≤
- **–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª**: 1.0
- **–î–∏–∞–ø–∞–∑–æ–Ω –±–∞–ª–ª–æ–≤**: 1.0 - 1.2

### –í–µ—Ä—Å–∏–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤:
- `439138d6ac88ed4fddfa8a601f0e1475d2ffb972` - 10 –∞—É–¥–∏—Ç–æ–≤
- `c95a708157d45644b1ebfb046bf051edc628afcb` - 1 –∞—É–¥–∏—Ç
- `a1c76b9410d38e375a0d9ec4a498199425ce6c12` - 9 –∞—É–¥–∏—Ç–æ–≤

### –ì—Ä—É–ø–ø—ã:
- `/astanahub/module/typing-in-progress` (ID: 2696) - –æ—Å–Ω–æ–≤–Ω–∞—è –≥—Ä—É–ø–ø–∞

## üéØ –ö–ª—é—á–µ–≤—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è

### 1. **–ü—Ä–æ—Ü–µ—Å—Å –∞—É–¥–∏—Ç–∞**
- –ê—É–¥–∏—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ–µ–∫—Ç–æ–≤
- –ö–∞–∂–¥—ã–π –∞—É–¥–∏—Ç –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –≥—Ä—É–ø–ø–µ (–º–æ–¥—É–ª—é)
- –ê—É–¥–∏—Ç–æ—Ä –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### 2. **–û—Ü–µ–Ω–∫–∏**
- –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∞—É–¥–∏—Ç–æ–≤ –ø–æ–ª—É—á–∞—é—Ç –æ—Ü–µ–Ω–∫—É 1.0
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∞—É–¥–∏—Ç—ã –∏–º–µ—é—Ç –æ—Ü–µ–Ω–∫—É 1.2 (–≤—ã—à–µ –±–∞–∑–æ–≤–æ–π)
- –ï—Å—Ç—å –∞—É–¥–∏—Ç—ã –±–µ–∑ –æ—Ü–µ–Ω–∫–∏ (null)

### 3. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏**
- –ê—É–¥–∏—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –¥–∞—Ç—ã
- –ü–µ—Ä–∏–æ–¥ –∞—É–¥–∏—Ç–∞: ~2 –Ω–µ–¥–µ–ª–∏ (—Å–æ–∑–¥–∞–Ω 11.09, –∑–∞–≤–µ—Ä—à–µ–Ω 25.09)

### 4. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –ö–∞–∂–¥—ã–π –∞—É–¥–∏—Ç –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∫–æ–¥–∞ (Git hash)
- –í–µ—Ä—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üîß –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

### –î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
1. **–°–ø–∏—Å–æ–∫ –∞—É–¥–∏—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∞—É–¥–∏—Ç—ã –≥–¥–µ `auditorId = userId`
2. **–î–µ—Ç–∞–ª–∏ –∞—É–¥–∏—Ç–∞** - —Å–≤—è–∑–∞—Ç—å —Å `result` –∏ `object` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –ø–æ–¥—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞—É–¥–∏—Ç–æ–≤, —Å—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª
4. **–í—Ä–µ–º–µ–Ω–Ω–∞—è –ª–∏–Ω–∏—è** - –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –¥–∞—Ç–∞–º

### –ü—Ä–∏–º–µ—Ä GraphQL –∑–∞–ø—Ä–æ—Å–∞:
```graphql
query {
  audit(where: {auditorId: {_eq: 2058}}, order_by: {createdAt: desc}) {
    id
    grade
    createdAt
    version
    result {
      object {
        name
        type
      }
      user {
        login
      }
    }
  }
}
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ**: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ `resultId` –º–æ–≥—É—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
2. **–ü—É—Å—Ç—ã–µ attrs**: –ü–æ–ª–µ `attrs` –æ–±—ã—á–Ω–æ –ø—É—Å—Ç–æ–µ, –Ω–æ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
3. **–í–µ—Ä—Å–∏–∏**: Git hash –≤ –ø–æ–ª–µ `version` –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. **–ì—Ä—É–ø–ø—ã**: –í—Å–µ –∞—É–¥–∏—Ç—ã –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –≥—Ä—É–ø–ø–∞–º/–º–æ–¥—É–ª—è–º

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–∞–±–ª–∏—Ü–∞ `public.audit` —è–≤–ª—è–µ—Ç—Å—è –∫–ª—é—á–µ–≤–æ–π –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –æ—Ü–µ–Ω–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤. –û–Ω–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–≤—è–∑—å –º–µ–∂–¥—É –∞—É–¥–∏—Ç–æ—Ä–∞–º–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –≥—Ä—É–ø–ø–∞–º–∏, –ø–æ–∑–≤–æ–ª—è—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –æ—Ü–µ–Ω–∫–∏ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏—Ö —Ä–∞–±–æ—Ç.

